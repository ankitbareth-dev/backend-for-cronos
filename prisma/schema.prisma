datasource db { 
  provider = "postgresql" 
  url      = env("DATABASE_URL") 
}

generator client { 
  provider = "prisma-client-js" 
}

model User {
  id         String        @id @default(uuid())
  name       String
  email      String        @unique
  password   String
  createdAt  DateTime      @default(now())

  matrices   TimeMatrix[]
}

model TimeMatrix {
  id          String        @id @default(uuid())
  name        String
  startDate   DateTime
  endDate     DateTime
  startTime   String
  endTime     String
  interval    Int
  createdAt   DateTime      @default(now())

  user        User          @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId      String

  cells       MatrixCell[]
  categories  Category[]  

  @@index([userId])
}

model Category {
  id        String      @id @default(uuid())
  name      String
  color     String
  createdAt DateTime    @default(now())

  matrix     TimeMatrix @relation(fields: [matrixId], references: [id], onDelete: Cascade)
  matrixId   String
}

model MatrixCell {
  id         String     @id @default(uuid())
  index      Int        
  colorHex   String?   

  matrix     TimeMatrix @relation(fields: [matrixId], references: [id], onDelete: Cascade)
  matrixId   String

  createdAt  DateTime   @default(now())

  @@index([matrixId])
  @@index([index])
}
